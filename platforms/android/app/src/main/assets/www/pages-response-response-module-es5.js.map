{"version":3,"sources":["webpack:///src/app/pages/response/response.page.html","webpack:///src/app/pages/response/response-routing.module.ts","webpack:///src/app/pages/response/response.module.ts","webpack:///src/app/pages/response/response.page.scss","webpack:///src/app/pages/response/response.page.ts"],"names":["routes","path","component","ResponsePageRoutingModule","imports","forChild","exports","ResponsePageModule","declarations","ResponsePage","apiService","busyService","router","items","amount","finalamount","file","note","solicitudeId","userId","working","delivery","fileUrl","leng","currency","currency2","apifile","responseId","descuento","ispdf","window","localStorage","getItem","getdata","presentAlert","navigate","fileurl","Get","then","res","finalAmount","err","event","length","parseInt","userinfo","JSON","parse","responseIdx","formData","FormData","append","id","upload","subscribe","type","UploadProgress","percentDone","Math","round","loaded","total","body","ok","input","document","createElement","onchange","target","files","loadimg","click","idimg","reader","FileReader","readAsDataURL","onload","result","indexOf","content","selector","template"],"mappings":"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","file":"pages-response-response-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"secondary\\\" >\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-center\\\">\\r\\n      <p style=\\\"color: white; font-size: 16px; font-weight: bold;\\\" >RESPUESTA SOLICITUD</p>\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"backgeneral\\\">\\r\\n  <ion-row class=\\\"ion-align-items-center\\\">\\r\\n    <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\r\\n      <p style=\\\"color: yellow; font-size: 14px; font-weight: bold; font-family: Verdana, Geneva, Tahoma, sans-serif;\\\" >Ingresa la siguiente Información</p>\\r\\n      <hr style=\\\"background-color: white;\\\">\\r\\n    </ion-col>\\r\\n  </ion-row> \\r\\n\\r\\n  <ion-label *ngIf=\\\"descuento == '0'\\\"   style=\\\"color:yellow; font-size: 14px; font-weight: bold; padding: 62px;\\\"> !OJO¡<span style=\\\"color: white;\\\"> NO APLICA DESCUENTO</span></ion-label>\\r\\n  \\r\\n  <ion-row class=\\\"ion-align-items-center\\\" *ngIf=\\\"descuento == '0'\\\"> \\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <hr style=\\\"background-color: white;\\\">\\r\\n    </ion-col>\\r\\n  </ion-row> \\r\\n  \\r\\n  <ion-item class=\\\"itemcolor1\\\">\\r\\n    <ion-input [(ngModel)]=\\\"amount\\\" placeholder=\\\"Precio. Sin punto(.) ni coma(,)\\\" (ngModelChange)=\\\"tocurrency($event)\\\"></ion-input>\\r\\n    <p  style=\\\"color: yellow; font-weight: bold;\\\">{{currency | currency:'USD':'symbol':'1.0-0'}}</p>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item *ngIf=\\\"descuento == '1'\\\" class=\\\"itemcolor1\\\">\\r\\n    <ion-input  [(ngModel)]=\\\"finalamount\\\" (ngModelChange)=\\\"tocurrency2($event)\\\"  placeholder=\\\"Último Precio ó Descuento\\\"></ion-input>\\r\\n    <p  style=\\\"color: yellow; font-weight: bold;\\\">{{currency2 | currency:'USD':'symbol':'1.0-0'}}</p>\\r\\n  </ion-item>\\r\\n  <ion-item class=\\\"itemcolor1\\\">\\r\\n    <ion-textarea [(ngModel)]=\\\"note\\\" maxlength=\\\"800\\\" (ngModelChange)=\\\"get($event)\\\" rows=\\\"6\\\" cols=\\\"20\\\" placeholder=\\\"¿Alguna Observación o Sugerencia?\\\"></ion-textarea>\\r\\n  </ion-item>\\r\\n  <ion-item class=\\\"itemcolor1\\\" *ngIf=\\\"note != '' && note !=null\\\" >\\r\\n    <p>{{leng}}</p><p>/800</p>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item class=\\\"itemcolor1\\\">\\r\\n    <ion-label position=\\\"floating\\\">Tiempo De Entrega</ion-label>\\r\\n    <ion-input  [(ngModel)]=\\\"delivery\\\" placeholder=\\\"Entrega Inmediata\\\" ></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  \\r\\n  <ion-item class=\\\"itemcolor1\\\"  button (click)=\\\"pickfile()\\\">\\r\\n    <ion-label>Adjuntar PDF o Foto</ion-label>\\r\\n    <ion-icon slot=\\\"end\\\" class=\\\"itemcolor1\\\" name=\\\"document-attach-outline\\\"></ion-icon>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item  *ngIf=\\\"fileUrl!=''\\\" >\\r\\n    <ion-img *ngIf=\\\"ispdf==false\\\"  [src]=\\\"fileUrl\\\"></ion-img>\\r\\n    <a *ngIf=\\\"ispdf==true\\\"  ><img src=\\\"./../../.././assets/pdfLogo.png\\\" style=\\\"width:100%;height:50px;\\\">  </a>\\r\\n    <ion-button (click)=\\\"clearimg()\\\" color=\\\"danger\\\" ><ion-icon slot=\\\"icon-only\\\" name=\\\"trash-bin-outline\\\"></ion-icon></ion-button>\\r\\n  </ion-item>\\r\\n\\r\\n<!-- \\r\\n  <ion-item  *ngIf=\\\"fileUrl!=''\\\" >\\r\\n    <ion-img [src]=\\\"fileUrl\\\"></ion-img>\\r\\n    <ion-button (click)=\\\"clearimg()\\\" color=\\\"danger\\\" ><ion-icon slot=\\\"icon-only\\\" name=\\\"trash-bin-outline\\\"></ion-icon></ion-button>\\r\\n  </ion-item>\\r\\n  -->\\r\\n  <ion-progress-bar *ngIf=\\\"working\\\" color=\\\"secondary\\\" type=\\\"indeterminate\\\"></ion-progress-bar>\\r\\n  <ion-grid>\\r\\n    <ion-row class=\\\"ion-align-items-center\\\">\\r\\n  <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\r\\n    <ion-button *ngIf=\\\"responseId!=null\\\"  [disabled]=\\\"working\\\" shape=\\\"round\\\" color=\\\"secondary\\\" (click)=\\\"send()\\\" ><ion-icon slot=\\\"start\\\" name=\\\"send\\\"></ion-icon>Actualizar y Responder</ion-button>\\r\\n    <ion-button *ngIf=\\\"responseId==null\\\" [disabled]=\\\"working\\\" shape=\\\"round\\\" color=\\\"secondary\\\" (click)=\\\"send()\\\" ><ion-icon slot=\\\"start\\\" name=\\\"send\\\"></ion-icon>Responder</ion-button>\\r\\n  </ion-col>\\r\\n</ion-row>\\r\\n</ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ResponsePage } from './response.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ResponsePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ResponsePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ResponsePageRoutingModule } from './response-routing.module';\r\n\r\nimport { ResponsePage } from './response.page';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ResponsePageRoutingModule\r\n  ],\r\n  declarations: [ResponsePage]\r\n})\r\nexport class ResponsePageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Jlc3BvbnNlL3Jlc3BvbnNlLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from '../../services/api.service';\r\nimport { BusyService } from '../../services/busy.service';\r\nimport { HttpEventType,HttpResponse} from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from '../../../environments/environment';\r\nimport { alertController } from '@ionic/core';\r\nimport { AlertController, IonButtons } from '@ionic/angular';\r\nimport { async } from '@angular/core/testing';\r\nimport { present } from '@ionic/core/dist/types/utils/overlays';\r\nimport { Button } from 'selenium-webdriver';\r\nimport { ok } from 'assert';\r\n\r\n@Component({\r\n  selector: 'app-response',\r\n  templateUrl: './response.page.html',\r\n  styleUrls: ['./response.page.scss'],\r\n})\r\nexport class ResponsePage implements OnInit {\r\n  items:any=[];\r\n  amount:string=null;\r\n  finalamount:string=null;\r\n  file:File=null;\r\n  note:string=null;\r\n  solicitudeId:string=null;\r\n  userId:string=null;\r\n  working:boolean=false;\r\n  delivery:string=\"\";\r\n  fileUrl:string='';\r\n  leng:number=0;\r\n  currency:string='';\r\n  currency2:string='';\r\n  apifile:string='';\r\n  responseId:any=null;\r\n  descuento:string='';\r\n  ispdf:boolean=false;\r\n  constructor( public apiService:ApiService,public busyService:BusyService,public router:Router) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n\r\n    \r\n    this.solicitudeId= window.localStorage.getItem('solicitudeId');\r\n    this.responseId= window.localStorage.getItem(\"responseId\");\r\n    if(window.localStorage.getItem(\"responseId\")!=null)\r\n    {\r\n     this.getdata();\r\n    }\r\n    else\r\n    {\r\n      this.amount=null;\r\n      this.finalamount=null;\r\n      this.file=null;\r\n      this.note=null;\r\n      this.delivery=\"\";\r\n      this.fileUrl=\"\";\r\n      this.currency= null;\r\n      this.currency2= null;\r\n      this.descuento = window.localStorage.getItem('Incluir_Descuento');\r\n    }\r\n\r\n    if(this.descuento == \"0\") {\r\n      this.busyService.presentAlert(\"¡Información!\",\"!OJO¡ NO APLICA DESCUENTO.\");\r\n    }\r\n    \r\n   }\r\n   detailsolicitude(){\r\n    this.router.navigate(['/solicitude-detail']);\r\n   }\r\n   getdata(){\r\n     this.apifile=environment.fileurl + \"responsefiles/\";\r\n      this.working=true;\r\n      this.apiService.Get(\"Responses/\"+ window.localStorage.getItem(\"responseId\")).then(res=>{\r\n      this.working=false;\r\n      if( res.fileUrl!=null &&  res.fileUrl!='')\r\n      {\r\n        this.fileUrl = this.apifile +  res.fileUrl;\r\n      }\r\n      this.amount=res.amount;\r\n      this.finalamount=res.finalAmount;\r\n      if(res.note==null || res.note =='null')\r\n      {\r\n        this.note='';\r\n      }\r\n      else\r\n      {\r\n        this.note=res.note;\r\n      }\r\n      this.delivery=res.delivery;\r\n      this.currency= this.amount;\r\n      this.currency2= this.finalamount;\r\n    },err=>{\r\n      this.working=false;\r\n    });\r\n   }\r\ntocurrency()\r\n{\r\n  this.currency= this.amount; \r\n}\r\ntocurrency2()\r\n{\r\n  this.currency2= this.finalamount;\r\n}\r\nget(event)\r\n{\r\n  this.leng=event.length;\r\n}\r\n\r\n async send(){\r\n  if(this.amount==null)\r\n  {\r\n    await this.busyService.presentAlert(\"¡Información!\",\"El campo Precio del Producto ó Servicio es Requerido.\");\r\n   return;\r\n  }\r\n  if(this.finalamount==null)\r\n  {\r\n    this.finalamount=this.amount;\r\n  }\r\n  if(parseInt( this.finalamount)>parseInt( this.amount))\r\n  {\r\n    await this.busyService.presentAlert(\"¡Información!\",\"El campo Último Precio o Descuento debe ser menor ó igual al Precio Original.\");\r\n   return;\r\n  }\r\n this.working=true;\r\n let userinfo= JSON.parse(window.localStorage.getItem(\"userinfo\"));\r\n  var responseIdx= window.localStorage.getItem('responseId') == null ? \"-1\" :window.localStorage.getItem('responseId');\r\n var formData= new FormData();\r\n formData.append('upload', this.file);\r\n formData.append(\"userId\",userinfo.id);\r\n formData.append(\"solicitudeId\",this.solicitudeId);\r\n formData.append(\"note\",this.note);\r\n formData.append(\"finalamount\",this.finalamount); \r\n formData.append(\"amount\",this.amount);\r\n formData.append(\"delivery\",this.delivery);\r\n formData.append(\"responseId\",responseIdx);\r\n this.apiService.upload(\"Responses/Upload\",formData).subscribe(\r\n  event => {\r\n    if (event.type == HttpEventType.UploadProgress) {\r\n      const percentDone = Math.round(100 * event.loaded / event.total);\r\n    } else if (event instanceof HttpResponse) {\r\n      if(event.body.ok){\r\n        this.working=false;\r\n        this.busyService.presentAlert(\"¡Información!\",\"Respuesta Enviada\");\r\n        this.router.navigate(['/companysol']);\r\n      }else{\r\n        this.working=false;\r\n        this.busyService.presentAlert(\"¡Información!\",\"Respuesta no Enviada\");\r\n      }\r\n    }\r\n  },\r\n  (err) => {\r\n    this.working=false;\r\n    this.busyService.presentAlert(\"¡Información!\",\"Error al enviar Respuesta\");\r\n  }, () => {\r\n  }\r\n);\r\n}\r\npickfile(){\r\n  let input = document.createElement('input');\r\n  input.type = 'file';\r\n  input.onchange = (event:any) => { \r\n  if (event.target.files.length == 0) {\r\n   this.busyService.presentAlert(\"¡Información!\",\"No se ha seleccionado una imágen\");\r\n   return\r\n\r\n }\r\n this.file = event.target.files[0];\r\n this.loadimg(\"#image\",this.file);\r\n};\r\ninput.click();\r\n}\r\nloadimg(idimg,file){\r\n  // setting up the reader\r\n  var reader = new FileReader();\r\n  reader.readAsDataURL(file); // this is reading as data url\r\n\r\n  // here we tell the reader what to do when it's done reading...\r\n  reader.onload = (event: any) => {\r\n    if(event.target.result.indexOf(\"data:application/pdf\")>=0)\r\n    {\r\n      this.ispdf=true;\r\n      this.fileUrl =\"PDF\"; \r\n    }\r\n    else{\r\n      this.ispdf=false;\r\n      var content = event.target.result; // capturo el contenido del content\r\n      this.fileUrl =  content ;\r\n    }\r\n  }\r\n\r\n}\r\nclearimg(){\r\nthis.fileUrl='';\r\nthis.file=null;\r\n}\r\n\r\nasync alert(){\r\n  await this.busyService.presentAlert(\"¡Información!\",\"OJO ESTE PRODUCTO O SERVICIO NO OFRECE DESCUENTO.\");\r\n}\r\n}\r\n\r\n\r\n\r\n"]}